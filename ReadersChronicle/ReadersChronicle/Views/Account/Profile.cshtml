@model ReadersChronicle.Models.ProfileViewModel
@{
    ViewData["Title"] = "Profile";
}

<div class="container mt-4">
    <div class="row mb-5">
        <h3>Welcome, @Model.UserName</h3>
    </div>
    <div class="row my-3">
        <div class="col-md-3">
            <div class="profile-img-container">
                <img src="@Model.ProfileImage" alt="Profile Image" class="main-profile-img" width="140" height="140" />
                <button class="btn btn-link edit-icon" data-bs-toggle="modal" data-bs-target="#changeProfileImageModal">
                    <i class="fa fa-edit"></i>
                </button>
            </div>
        </div>
        <div class="col-md-5 ps-4">
            <h4>@Model.UserName</h4>
            <p>@Model.Email</p>
        </div>
        <div class="col-md-4 d-flex float-end">
            <a href="@Url.Action("EditProfile", "Account")" class="btn profile-button btn-dark me-2">Edit</a>
            <a class="btn btn-danger profile-button" asp-action="DeleteProfile" asp-controller="Account" onclick="return confirm('Are you sure you want to delete your profile?')">Delete</a>
        </div>
    </div>

    <div class="row mt-5">
        <h5>Bio</h5>
        <p id="bio">@Model.Bio</p>
    </div>

    <div class="row my-3">
        <h5>My email address</h5>
        <div class="col-md-8 mt-2">
            <p>
                <i class="fa fa-envelope" aria-hidden="true"></i>
                <span>@Model.Email</span>
            </p>
        </div>
        <div class="col-md-4 mt-3">
            <a href="@Url.Action("ChangePassword", "Account")" class="link-dark fw-bold">Change Password</a>
        </div>
    </div>


    <div class="modal fade" id="changeProfileImageModal" tabindex="-1" aria-labelledby="changeProfileImageModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="changeProfileImageModalLabel">Change Profile Image</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form asp-action="ChangeProfileImage" method="post" enctype="multipart/form-data">
                    <div class="modal-body">
                        <input type="file" name="ProfileImage" class="form-control" />
                        <span class="text-danger" asp-validation-for="ProfileImage"></span>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<link href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" rel="stylesheet" />

<style>
    body{
        background-color: #f5f5f5;
    }

    .profile-button {
        background-color: #8d6b88;
        font-weight: bold;
        border: none;
        height:3rem;
    }

    .profile-button:hover{
            background-color: #013a55;
    }

    .profile-img-container {
        position: relative;
        width: 140px;
        height: 140px;
        border-radius: 50%;
        border-style: solid;
        border-color: #FFFFFF;
        box-shadow: 0 0 8px 3px #B8B8B8;
    }

    .profile-img-container img {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        object-fit: cover;
    }

    .edit-icon {
        position: absolute;
        top: 5px;
        right: 5px;
        border-radius: 50%;
        background-color: white;
        color: cornflowerblue;
        box-shadow: 0 0 8px 3px #B8B8B8;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 30px;
        width: 30px;
        padding: 0;
    }

    .edit-icon:hover {
        cursor: pointer;
        background-color: #f0f0f0;
    }

    .edit-icon i {
        font-size: 16px;
    }

    .fa-envelope {
        display: inline-block;
        padding: 8px;
        background-color: #ebe8eb;
        border-radius: 50%;
        color: #333;
        margin-right: 10px;
        font-size: 20px;
        line-height: 1;
    }

    p span {
        font-size: 16px;
    }

    #bio{
        width:100%;
        padding:10px;
        background-color: #f9f9f9;
        color: darkgray;
        font-size: 18px;
    }

    .modal{
        position:absolute;
        top:35%;
    }
</style>